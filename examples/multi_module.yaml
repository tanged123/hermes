# Hermes Configuration - Multi-Module with Wiring
#
# This configuration demonstrates:
# - Multiple inproc modules (injection + mock physics)
# - Signal wiring between modules with gain/offset
# - Multi-rate scheduling (injection @ 200Hz, physics @ 1000Hz)
#
# Run:
#   hermes run examples/multi_module.yaml

version: "0.2"

modules:
  # Injection module: writable signals for external input
  inputs:
    type: inproc
    inproc_module: hermes.modules.injection
    signals:
      - name: thrust_cmd
        type: f64
        unit: N
        writable: true
      - name: pitch_cmd
        type: f64
        unit: deg
        writable: true

  # Mock physics module: simple dynamics for testing
  physics:
    type: inproc
    inproc_module: hermes.modules.mock_physics
    signals:
      - name: input
        type: f64
        writable: true
      - name: output
        type: f64
      - name: state
        type: f64

wiring:
  # Route thrust command directly to physics input
  - src: inputs.thrust_cmd
    dst: physics.input

  # Example with unit conversion (deg to rad)
  # - src: inputs.pitch_cmd
  #   dst: some_module.pitch_input
  #   gain: 0.0174533

execution:
  mode: realtime
  rate_hz: 200.0
  schedule:
    - name: inputs     # Injection first (writes commands)
      rate_hz: 200.0   # 1x per major frame
    - name: physics    # Physics second (reads commands, computes dynamics)
      rate_hz: 1000.0  # 5x per major frame

server:
  enabled: true
  host: "0.0.0.0"
  port: 8765
  telemetry_hz: 60.0
